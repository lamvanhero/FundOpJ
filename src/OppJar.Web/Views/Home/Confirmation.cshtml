@*@using System.Collections.Generic
@using Microsoft.AspNetCore.Http
@using Microsoft.AspNetCore.Http.Authentication
@using Newtonsoft.Json
@using Leeto.Web.ViewModels;
@inject SignInManager<User> SignInManager
@inject UserManager<User> UserManager

@model ConfirmationViewModel*@

@{
    ViewData["Title"] = "Log in";
}

@{
    Layout = "";
}

@{
//User user = @UserManager.Users.SingleOrDefault(x => x.UserName == Context.User.Identity.Name);
}



<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>OppJar</title>
    <meta name="description" content="Crowdfunding Savings Accounts for Every Child" />
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, minimal-ui" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge">

    <!-- for ios 7 style, multi-resolution icon of 152x152 -->
    <meta name="apple-mobile-web-app-capable" content="yes">
    <meta name="apple-mobile-web-app-status-barstyle" content="black-translucent">
    <link rel="apple-touch-icon" href="/assets/images/logo.png">
    <meta name="apple-mobile-web-app-title" content="Zeus">
    <!-- for Chrome on Android, multi-resolution icon of 196x196 -->
    <meta name="mobile-web-app-capable" content="yes">
    <link rel="shortcut icon" sizes="196x196" href="/favicon.ico">

    <!-- style -->
    <link rel="stylesheet" href="/css/animate.min.css" type="text/css" />
    <link rel="stylesheet" href="/assets/glyphicons/glyphicons.css" type="text/css" />
    <link rel="stylesheet" href="/assets/font-awesome/css/font-awesome.min.css" type="text/css" />
    <link rel="stylesheet" href="/assets/material-design-icons/material-design-icons.css" type="text/css" />

    <link rel="stylesheet" href="/assets/bootstrap/dist/css/bootstrap.min.css" type="text/css" />
    <!-- build:css /assets/styles/app.min.css -->
    <link rel="stylesheet" href="/assets/styles/app.css" type="text/css" />
    <!-- endbuild -->
    <link rel="stylesheet" href="/assets/styles/font.css" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Montserrat:400,500,700,900" rel="stylesheet">
    <!-- jQuery -->
    <script src="/libs/jquery/jquery/dist/jquery.js" type="text/javascript"></script>
    <!-- Bootstrap -->
    <script src="/libs/jquery/tether/dist/js/tether.min.js" type="text/javascript"></script>
    <script src="/libs/jquery/bootstrap/dist/js/bootstrap.js" type="text/javascript"></script>
    <!-- core -->
    <script src="/libs/jquery/underscore/underscore-min.js" type="text/javascript"></script>
    <script src="/libs/jquery/jQuery-Storage-API/jquery.storageapi.min.js" type="text/javascript"></script>
    <script src="/libs/jquery/PACE/pace.min.js" type="text/javascript"></script>

    <script src="/libs/jquery/jquery-match-height/jquery.matchHeight.js" type="text/javascript"></script>
    <!--Vue.js-->
    <script src="https://unpkg.com/vue" type="text/javascript"></script>    

</head>
<body style=" margin:0 auto" >
<div class="app center" id="app" >

<!-- ############ LAYOUT START-->

  <!-- aside -->
  
  <!-- / -->
  
  <!-- content -->
  <div id="vue">
  <div id="content" class="app-content box-shadow-z0 white" role="main">
    <div class="app-header box-shadow" style="background-color:#4f87b8">
      <div class="navbar">
          <a class="navbar-brand" href="/">
              <img src="/assets/images/oppjar.PNG" style="max-height: 45px; vertical-align: middle;max-width: 200px;">
              <!--<span class="hidden-folded inline">OppJar</span>-->
          </a>
        <!-- navbar right -->
        <ul class="nav navbar-nav pull-right">
          <li class="nav-item dropdown">
            <a class="nav-link" data-toggle="dropdown">
              <i class="material-icons" style="color:white">&#xe8b6;</i>
            </a>
            <div class="dropdown-menu text-color w-lg animated fadeInUp pull-right">
              <!-- search form -->
              <form class="navbar-form form-inline navbar-item m-l v-m" role="search">
                <div class="form-group l-h m-a-0">
                  <div class="input-group input-group-sm">
                    <input type="text" class="form-control" placeholder="Search OppJar">
                    <span class="input-group-btn">
                      <button type="submit" class="btn white b-a no-shadow"><i class="fa fa-search"></i></button>
                    </span>
                  </div>
                </div>
              </form>
              <!-- / search form -->
            </div>
          </li>
          @*@if (SignInManager.IsSignedIn(User))*@
          @if (false)
          {
                    <li class="nav-item dropdown">
                        <a class="nav-link dropdown-toggle" data-toggle="dropdown" aria-expanded="false" style="color:white">

                            <span class="hidden-md-down nav-text m-r-sm text-right text-white">
                                @*@if (@user.FirstName == null)
                                      {
                                        @user.UserName
                                      }
                                      else
                                      {
                                        <span>@user.FirstName @user.LastName</span>
                                      }
                            </span>
                            <span class="avatar w-30 white">
                                @if (string.IsNullOrEmpty(user.PictureUrl))
                                {
                                    <img src="/assets/images/user.svg" alt="" />
                                }
                                else
                                {
                                    <img src="@user.PictureUrl" alt="" />
                                }*@
                            </span>
                        </a>
                        <div class="dropdown-menu pull-right dropdown-menu-scale">
                            <form class="navbar-right">

                                <a class="dropdown-item" onclick="$('#logoutForm').submit()" href="#">Sign Out</a>
                            </form>
                        </div>
                    </li>

                    <!--Logout Form-->
                    <form asp-area="" asp-controller="Account" asp-action="LogOff" method="post" id="logoutForm" class="navbar-right">
                    </form>
                    <!--/Logout Form-->
          }
          else
          {
                    <li class="nav-item">
                        <a class="nav-link" href="/signin">
                        <span class="hidden-xs-down btn rounded btn-outline text-sm _600" style="border:1px solid white; color:white; background-color:#4f87b8">
                            Login
                        </span>
                        <span class="hidden-sm-up ">
                            <i class="fa fa-search" style="color:white">&#xe7fd;</i>
                        </span>
                        </a>
                    </li>
          }
        </ul>
        <!-- / navbar right -->
        <!-- navbar collapse -->
        <div class="collapse navbar-toggleable-sm" id="navbar-1">
        </div>
        <!-- / navbar collapse -->
      </div>   
    </div> 
  </div>
    
<div class="app-body white" id="view" style="padding-top: 0">

<!-- ############ PAGE START-->
<div style="padding: 2.5rem; margin-top:50px; padding-top: 4rem">
<div class="box b-a" style="border:2px solid lightgrey">
  <div class="row-col">
    <div class="col-sm-3 white" id="sponsor-col" style="position: relative">
            <div class="p-a-lg pos-rlt b-r" style="padding-bottom:20px !important; padding-top: 60px !important; text-align:center;">
                <img src="/assets/images/NoraWesClose-min.JPG" class="img-circle avatar " style="width: 175px; height: 175px; object-fit: cover;">
                <br><br><br>
                <div><h2> Baby Kuykendall</h2></div>
            </div>   
      <div id="detail-box" class="padding pos-rlt b-r b-b" style="padding-left: 50px; height: 260px">
        
          
          <div id="details">

            <div class="list-left _500">
            Due Date
            </div>
            <div class="list-body _500" style="margin-left:45%; color:#4f87b8">
            6/6/2017
            </div>
            <div class="list-left _500 ">
            Location
            </div>
            <div class="list-body _500" style="margin-left:45%; color:#4f87b8">
            Los Angeles, CA
            </div>
            <div class="list-left _500">
            Parent
            </div>
            <div class="list-body _500" style="margin-left:45%; color:#4f87b8">
            Noramay Cadena
            </div>
            <div class="list-left _500">
            Parent
            </div>
            <div class="list-body _500" style="margin-left:45%; color:#4f87b8">
            Wes Kuykendall
            </div>
            <br>
          </div>

      </div>
        
       
    </div>

        <div class="padding">
            <h3 style="text-align:center; color:#4f87b8">Make a Donation</h3>
            <br>

            <div >
                <div class="col-sm-12" style="height: 800px">
                    
                        <div class="box " style="background-color:#f0f0f0">
                            
                            <div class="box-body b-a" style="text-align:center">
                                
                                <div class="row" style="display:flex; justify-content:center; margin-top:-150px">
                                    <img id="bigCheck" src="/assets/images/confirmed.gif" alt="#" style="margin:0 auto"/>
                                </div>  
                                <h4 style="margin-top:-155px; color:#77b43f">$ 000 Donation Confirmed!</h4>

                                    @*@if (user.AccessToken != null)*@
                                    @if (false)
                                    {
                                        <button class="btn rounded text-sm m-t" id="fb-share-button"
                                           style="background-color: #3B5998; color:white; margin-bottom: 25px" v-on:click="fbPost(url)">
                                            <i class="fa fa-facebook-square text-lg" style="color:white; margin-right:7px; vertical-align: -4px"></i>
                                            Share on Facebook
                                        </button>
                                    }
                                    else
                                    {
                                        <a class="btn rounded text-sm m-t"
                                           style="background-color: #3B5998; color:white; margin: 0 auto" onClick="$('#fb-login').click()">
                                            <i class="fa fa-facebook-square text-lg" style="color:white; margin-right:7px; vertical-align: -4px"></i>
                                           Share on Facebook
                                        </a>
                                        @*<form asp-controller="Account" asp-action="ExternalLogin" asp-route-returnurl='@Context.Request.Path@Context.Request.QueryString' method="post" class="form-horizontal" style="display:none">*@
                                        <form asp-controller="Account"   method="post" class="form-horizontal" style="display:none">
                                            <div>
                                                <p>
                                                    <a class="btn rounded text-sm m-t"
                                                       style="background-color: #3B5998; color:white; margin-bottom: 25px" type="submit">
                                                        <i class="fa fa-facebook-square text-lg" style="color:white; margin-right:7px; vertical-align: -4px"></i>
                                                        Share on Facebook
                                                    </a>
                                                    <button type="submit" class="btn btn-default" id="fb-login" name="provider" value="Facebook" title="Log in using your Facebook account">"Facebook"</button>
                                                </p>
                                            </div>
                                        </form>
                                    }
                                <i class="fa fa-facebook-square" aria-hidden="true">asdf</i>
                                asdf
                                <h6 id="fb-share-msg"></h6>


                                <div class="p-a text-right">
                                    <a href="/user/" class="btn rounded text-xs primary" 
                                        style="padding-left:35px; padding-right: 35px; color:white">
                                        Return to Profile 
                                    </a>
                                </div>
                                </div>
                                
                                
                            </div>
                        </div>
                </div>
            </div>

        </div>
      
    </div>
  </div>
    

<!-- ############ PAGE END-->
</div>
<!-- ############ LAYOUT END-->

</div>



</div>
@*</div>*@


 


<style>
  
  * {
      font-weight: 500;
  }
  
  h1, h3, h4, h5, h6 {
      font-weight: bold;
  }

  h4 {
    font-size: 14pt;
  }
  
  .list-item {
    margin-bottom: 3px;
  }
  #sponsor-col  .list-left {
    padding-right: 10px;
  }
  #sponsor-col * {
      background-color: #f0f0f0;
      margin-top: -20px !important;
      margin-bottom: 0 !important;
  }
  img {
    object-fit: cover;
  }
  .rt-list > li {
    margin-top:20px;
  }
  #details * {
    line-height: 28px;
  }

  .pagination li * {
    margin: 0 10px;
  }
  .pagination a {
    width: 34px;
  }

  .sponsor-grid div{
    margin-bottom: 20px;
  }
  #sponsorModal {
    font-family: "nunito-regular";
  }
  .ui-check input:checked + i:before {
    background-color:#4f87b8;
}
input {
    height: 50px;
    border-radius: 5px !important;
}

.detail-box, ::after, ::before {
    border-bottom: 0 !important;
}

</style>
       
<!-- build:js scripts/app.html.js -->

  <script src="/scripts/config.lazyload.js" type="text/javascript"></script>

  <script src="/scripts/palette.js" type="text/javascript"></script>
  <script src="/scripts/ui-load.js" type="text/javascript"></script>
  <script src="/scripts/ui-jp.js" type="text/javascript"></script>
  <script src="/scripts/ui-include.js" type="text/javascript"></script>
  <script src="/scripts/ui-device.js" type="text/javascript"></script>
  <script src="/scripts/ui-form.js" type="text/javascript"></script>
  <script src="/scripts/ui-nav.js" type="text/javascript"></script>
  <script src="/scripts/ui-screenfull.js" type="text/javascript"></script>
  <script src="/scripts/ui-scroll-to.js" type="text/javascript"></script>
  <script src="/scripts/ui-toggle-class.js" type="text/javascript"></script>

  <script src="/scripts/app.js" type="text/javascript"></script>

  <!-- ajax -->
  <script src="/libs/jquery/jquery-pjax/jquery.pjax.js" type="text/javascript"></script>
  <script src="/scripts/ajax.js" type="text/javascript"></script>
  <script type="text/javascript">
      window.fbAsyncInit = function () {
        fbLoaded = true;
        FB.init({
            appId: 1,
            cookie: true,  // enable cookies to allow the server to access the session
            xfbml: true,  // parse social plugins on this page
            version: 'v2.8'
        });
    };

    (function (d, s, id) {
        var js, fjs = d.getElementsByTagName(s)[0];
        if (d.getElementById(id)) return;
        js = d.createElement(s); js.id = id;
        js.src = "//connect.facebook.net/en_US/sdk.js";
        fjs.parentNode.insertBefore(js, fjs);
    }(document, 'script', 'facebook-jssdk'));


      function FBPostTextClick(returnUrl) {
          if ($('#fb-share-button').hasClass('disabled')) {
              return;
          }


          @*FB.ui({
              method: 'feed',
              link: ' @Context.Request.Host/user/@Model.Recipient.Slug',   // This won't work in local but will work in staging/production.
              picture: "@Model.Recipient.ImageUrl",
              name : "I just donated to " + "@(Model.Recipient.FirstName + " ")" + "@Model.Recipient.LastName",
              description: "Free interest-bearing trust accounts for your child with the ability to choose your investment risk. Raise additional funds via donation on a crowdfunding page for your child.",
              caption: "Crowdfunding the next generation!",
          }, function (response) { });*@

        console.log("returnUrl", returnUrl)
        $.ajax({
            type: 'POST',
            @*url: '@Url.Action("PostText", "FacebookApi")',*@
            url: '@Url.Action("")',
            contentType: "application/json; charset=UTF-8",
            data: JSON.stringify({
                message : " ",
                @*link: ' @Context.Request.Host/user/@Model.Recipient.Slug',
                picture: "@Model.Recipient.ImageUrl",*@
                @*name : "I just donated to " + "@(Model.Recipient.FirstName + " ")" + "@Model.Recipient.LastName",*@
                description: "Free interest-bearing trust accounts for your child with the ability to choose your investment risk. Raise additional funds via donation on a crowdfunding page for your child.",
                caption : "Crowdfunding the next generation!"
            }),
            success: function (result) {
                console.log(result);
                if (result.success) {
                    $('#fb-share-msg').html('Successfully shared to Facebook.');
                    $('#fb-share-msg').css('color', '#77b43f');
                    $('#fb-share-button').addClass('disabled');
                    $('#fb-share-button').on('cursor', 'grab');

                } else {
                    $('#fb-share-msg').html(result.errorMessage);
                    $('#fb-share-msg').css('color', '#4f87b8');
                }
            },
            error: function (result) {
                console.log(result);
            }
        });
    }

    function FBPostImageClick() {
        $.ajax({
            type: 'POST',
            @*url: '@Url.Action("PostImage", "FacebookApi")',*@
            url: '@Url.Action("")',
            contentType: "application/json; charset=UTF-8",
            data: JSON.stringify({
                url: "https://gyazo.com/3adfc3eea665cb0e02accd3479a0d96f.png",
                caption : "Caption for the Picture"
            }),
            success: function (result) {
                console.log(result);
            },
            error: function (result) {
                console.log(result);
            }
        });
    }

        function FBPostVideoClick() {
        $.ajax({
            type: 'POST',
            @*url: '@Url.Action("PostVideo", "FacebookApi")',*@
            url: '@Url.Action("")',
            contentType: "application/json; charset=UTF-8",
            data: JSON.stringify({
                file_url: "http://i.gyazo.com/8eba31c933977ea976062680dc161840.gif",
                title: "Title of the Video",
                description: "Description of the video."
            }),
            success: function (result) {
                console.log(result);
            },
            error: function (result) {
                console.log(result);
            }
        });
    }


    $(document).ready(function(){
        $('#bigCheck').show();
    });

    @*var userArr = @Html.Raw(Newtonsoft.Json.JsonConvert.SerializeObject(@UserManager.Users.Where(x => x.UserName == Context.User.Identity.Name)) as Object);*@
    
    var user = userArr[0]
    var vm = new Vue({
        el: '#vue',
        data: {
            @*model: @Html.Raw(JsonConvert.SerializeObject(@Model.Donation) as Object),*@
            newCard: false,
            url: window.location.href,
            user: user
        },
        methods: {
            loaded(){
                console.log('loaded Vue.');
                console.log(this.model);
            },
            fbPost(returnUrl){
                console.log('fbpost');
                FBPostTextClick(returnUrl);
            },
            sendEmail(user){
                SendTestEmail(user);
            }
        },
        created: function(){
            this.loaded();
            $('[v-cloak]').css("visibility", "visible");
        }
    })


</script>
  
<!-- endbuild -->
</body>
</html>
